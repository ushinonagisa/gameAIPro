# MMO 游戏服务器端大世界寻路的预计算

[toc]



## 1.概述

现在常用的寻路解决方案：

1. 寻路预计算：

* 优点：计算开销少，时间复杂度低
* 缺点：
  * 占用内存
  * 缺乏灵活性

2. A* algorithm

   动态计算寻路路径，节省内存，但是计算成本高



然而对于MMO游戏，它有着非常庞大与详尽的地图，所以只使用A*算法花费的时间太长。因此对于这种类型的游戏，处理方案就是预计算与A\*的结合。



## 2. 系统概览

MMO游戏寻路需求

* 寻路系统迅速反应
* 路径的生成自动完成
  * 数以百计的地图自动生成导航数据
* 所有玩家可以去的地方NPC都可以去
  * 寻路系统需要符合碰撞系统



核心：使用导航网格来表征游戏世界







## 3. 工具链

最主要的工具：

1. 关卡编辑器：收集所有碰撞数据去生成导航网格

   1. Recast生成导航网格，用于识别可通行区域。最主要的修改是为游戏定制的”跌落网格“（falling mesh）



2. 表格创建器：







## 4. 网格的生成







## 5. 查找表生成概览







## 6. 表的生成算法







## 7. 表的不一致性







## 8. 服务器端对于查找表的使用







## 9. 结果







## 10. 总结
